#!/bin/bash
#  vim:tw=0:ts=2:sw=2:et:norl:ft=bash

# NOTE: If this script is found on $PATH, it is automatically
#       wired as `git get` because magic. (Same goes for any
#       executable named `git-<foo>`.)

# For GREP_COLORS, see:
#   http://www.arwin.net/tech/bash.php

git-brs () {
#git --no-pager branch -avv | egrep -v "remotes/travel/" | GREP_COLOR="00;37" egrep --color=always -e " [a-f0-9]{8} |$" | GREP_COLOR="01;37" egrep --color=always -e "\[[^]*\]|$" | GREP_COLOR="01;35" egrep --color=always -e "^  [^[:space:]]*|$" | GREP_COLOR="01;33" egrep --color=always -e "[[:space:]]+feature/([^] :])*|$" | GREP_COLOR="01;32" egrep --color=always -e "[[:space:]]+wip/([^] :])*|$" | GREP_COLOR="01;36" egrep --color=always -e "[[:space:]]+develop|[[:space:]]+master|$"
  git --no-pager branch -avv \
    | egrep -v "remotes/travel/" \
    | grep -P "remotes/origin|remotes/upstream|^..(?!remotes/)" \
    | GREP_COLOR="00;37" egrep --color=always -e "\[[^]]+\]|$" \
    | GREP_COLOR="01;30" egrep --color=always -e " [a-f0-9]{8} |$" \
    | GREP_COLOR="01;35" egrep --color=always -e "^. [^[:space:]]*|$" \
    | GREP_COLOR="01;33" egrep --color=always -e "[[:space:]]+feature/([^] :])*|$" \
    | GREP_COLOR="01;32" egrep --color=always -e "[[:space:]]+wip/([^] :])*|$" \
    | GREP_COLOR="01;37;46" egrep --color=always -e "remotes/origin/([^] :])*|$" \
    | GREP_COLOR="01;30;47" egrep --color=always -e "remotes/upstream/([^] :])*|$" \
    | GREP_COLOR="01;36" egrep --color=always -e "[[:space:]]+develop|[[:space:]]+master|$"
#    | GREP_COLOR="01;34;46" egrep --color=always -e "remotes/([^] :])*|$" \
#    | GREP_COLOR="01;36;46" egrep --color=always -e "remotes/([^] :])*|$" \
#    | GREP_COLOR="01;33;46" egrep --color=always -e "remotes/([^] :])*|$" \
#    | GREP_COLOR="00;33;46" egrep --color=always -e "remotes/([^] :])*|$" \
#    | GREP_COLOR="00;33;47" egrep --color=always -e "remotes/([^] :])*|$" \
}

main () {
  git-brs
}

main "$@"

